<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="19.1 Using Praat’s signal processing routines in the EMU-SDMS | The EMU-SDMS Manual" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/" />
<meta property="og:image" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/pics/EMU-webAppIcon-roundCorners.png" />
<meta property="og:description" content="19.1 Using Praat’s signal processing routines in the EMU-SDMS | The EMU-SDMS Manual" />
<meta name="github-repo" content="IPS-LMU/The-EMU-SDMS-Manual" />

<meta name="author" content="Raphael Winkelmann" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="19.1 Using Praat’s signal processing routines in the EMU-SDMS | The EMU-SDMS Manual">

<title>19.1 Using Praat’s signal processing routines in the EMU-SDMS | The EMU-SDMS Manual</title>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#welcome">Welcome</a></li>
<li><a href="1-installing-the-emu-sdms.html#installing-the-emu-sdms"><span class="toc-section-number">1</span> Installing the EMU-SDMS</a>
<ul>
<li><a href="1-1-version-disclaimer.html#version-disclaimer"><span class="toc-section-number">1.1</span> Version disclaimer</a></li>
<li><a href="1-2-for-developers-and-people-interested-in-the-source-code.html#for-developers-and-people-interested-in-the-source-code"><span class="toc-section-number">1.2</span> For developers and people interested in the source code</a></li>
</ul></li>
<li class="part"><span><b>I Overview and tutorial</b></span></li>
<li><a href="2-chap-overview.html#chap:overview"><span class="toc-section-number">2</span> An overview of the EMU-SDMS</a>
<ul>
<li><a href="2-1-the-evolution-of-the-emu-sdms.html#the-evolution-of-the-emu-sdms"><span class="toc-section-number">2.1</span> The evolution of the EMU-SDMS</a></li>
<li><a href="2-2-sec-overview-sysArch.html#sec:overview-sysArch"><span class="toc-section-number">2.2</span> EMU-SDMS: System architecture and default workflow</a></li>
<li><a href="2-3-emu-sdms-is-it-something-for-you.html#emu-sdms-is-it-something-for-you"><span class="toc-section-number">2.3</span> EMU-SDMS: Is it something for you?</a></li>
</ul></li>
<li><a href="3-chap-tutorial.html#chap:tutorial"><span class="toc-section-number">3</span> A tutorial on how to use the EMU-SDMS</a>
<ul>
<li><a href="3-1-converting-the-textgrid-collection.html#converting-the-textgrid-collection"><span class="toc-section-number">3.1</span> Converting the TextGrid collection</a></li>
<li><a href="3-2-loading-and-inspecting-the-database.html#loading-and-inspecting-the-database"><span class="toc-section-number">3.2</span> Loading and inspecting the database</a>
<ul>
<li><a href="3-2-loading-and-inspecting-the-database.html#overview"><span class="toc-section-number">3.2.1</span> Overview</a></li>
<li><a href="3-2-loading-and-inspecting-the-database.html#database-annotation-and-visual-inspection"><span class="toc-section-number">3.2.2</span> Database annotation and visual inspection</a></li>
</ul></li>
<li><a href="3-3-querying-and-autobuilding-the-annotation-structure.html#querying-and-autobuilding-the-annotation-structure"><span class="toc-section-number">3.3</span> Querying and autobuilding the annotation structure</a></li>
<li><a href="3-4-autobuilding.html#autobuilding"><span class="toc-section-number">3.4</span> Autobuilding</a>
<ul>
<li><a href="3-4-autobuilding.html#querying-the-hierarchical-annotations"><span class="toc-section-number">3.4.1</span> Querying the hierarchical annotations</a></li>
</ul></li>
<li><a href="3-5-section-tutorial-sigExtrAndExpl.html#section:tutorial-sigExtrAndExpl"><span class="toc-section-number">3.5</span> Signal extraction and exploration</a></li>
<li><a href="3-6-vowel-height-as-a-function-of-word-types-content-vs-function-evaluation-and-statistical-analysis.html#vowel-height-as-a-function-of-word-types-content-vs.-function-evaluation-and-statistical-analysis"><span class="toc-section-number">3.6</span> Vowel height as a function of word types (content vs. function): evaluation and statistical analysis</a></li>
<li><a href="3-7-conclusion.html#conclusion"><span class="toc-section-number">3.7</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Main components and concepts</b></span></li>
<li><a href="4-chap-annot-struct-mod.html#chap:annot-struct-mod"><span class="toc-section-number">4</span> Annotation Structure Modeling</a>
<ul>
<li><a href="4-1-per-database-annotation-structure-definition.html#per-database-annotation-structure-definition"><span class="toc-section-number">4.1</span> Per database annotation structure definition</a></li>
<li><a href="4-2-parallel-labels-and-multiple-attributes.html#parallel-labels-and-multiple-attributes"><span class="toc-section-number">4.2</span> Parallel labels and multiple attributes</a></li>
<li><a href="4-3-metadata-strategy-using-single-bundle-root-nodes.html#metadata-strategy-using-single-bundle-root-nodes"><span class="toc-section-number">4.3</span> Metadata strategy using single bundle root nodes</a></li>
<li><a href="4-4-conclusion-1.html#conclusion-1"><span class="toc-section-number">4.4</span> Conclusion</a></li>
</ul></li>
<li><a href="5-chap-emuDB.html#chap:emuDB"><span class="toc-section-number">5</span> The <code>emuDB</code> Format</a>
<ul>
<li><a href="5-1-database-design.html#database-design"><span class="toc-section-number">5.1</span> Database design</a></li>
<li><a href="5-2-creating-an-emudb.html#creating-an-emudb"><span class="toc-section-number">5.2</span> Creating an <code>emuDB</code></a>
<ul>
<li><a href="5-2-creating-an-emudb.html#creating-an-emudb-from-scratch"><span class="toc-section-number">5.2.1</span> Creating an <code>emuDB</code> from scratch</a></li>
<li><a href="5-2-creating-an-emudb.html#loading-and-editing-an-empty-database"><span class="toc-section-number">5.2.2</span> Loading and editing an empty database</a></li>
<li><a href="5-2-creating-an-emudb.html#level-definitions"><span class="toc-section-number">5.2.3</span> Level definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#link-definitions"><span class="toc-section-number">5.2.4</span> Link definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#file-handling"><span class="toc-section-number">5.2.5</span> File handling</a></li>
<li><a href="5-2-creating-an-emudb.html#ssff-track-definitions"><span class="toc-section-number">5.2.6</span> SSFF track definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#configuring-the-emu-webapp-and-annotating-the-emudb"><span class="toc-section-number">5.2.7</span> Configuring the <code>EMU-webApp</code> and annotating the <code>emuDB</code></a></li>
</ul></li>
<li><a href="5-3-conclusion-2.html#conclusion-2"><span class="toc-section-number">5.3</span> Conclusion</a></li>
</ul></li>
<li><a href="6-chap-querysys.html#chap:querysys"><span class="toc-section-number">6</span> The query system</a>
<ul>
<li><a href="6-1-sec-query-emuRsegs.html#sec:query-emuRsegs"><span class="toc-section-number">6.1</span> The resulting object of a query</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#eql-the-emu-query-language-version-2"><span class="toc-section-number">6.2</span> <code>EQL</code>: The EMU Query Language version 2</a>
<ul>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#simple-queries"><span class="toc-section-number">6.2.1</span> Simple queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#combining-simple-queries"><span class="toc-section-number">6.2.2</span> Combining simple queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-positionQueries"><span class="toc-section-number">6.2.3</span> Position queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-countQueries"><span class="toc-section-number">6.2.4</span> Count queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-moreComplexQueries"><span class="toc-section-number">6.2.5</span> More complex queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-deducingTime"><span class="toc-section-number">6.2.6</span> Deducing time</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:requery"><span class="toc-section-number">6.2.7</span> Requery</a></li>
</ul></li>
<li><a href="6-3-discussion.html#discussion"><span class="toc-section-number">6.3</span> Discussion</a></li>
</ul></li>
<li><a href="7-chap-sigDataExtr.html#chap:sigDataExtr"><span class="toc-section-number">7</span> Signal data extraction</a>
<ul>
<li><a href="7-1-extracting-pre-defined-tracks.html#extracting-pre-defined-tracks"><span class="toc-section-number">7.1</span> Extracting pre-defined tracks</a></li>
<li><a href="7-2-adding-new-tracks.html#adding-new-tracks"><span class="toc-section-number">7.2</span> Adding new tracks</a></li>
<li><a href="7-3-calculating-tracks-on-the-fly.html#calculating-tracks-on-the-fly"><span class="toc-section-number">7.3</span> Calculating tracks on-the-fly</a></li>
<li><a href="7-4-the-resulting-object-tibble.html#the-resulting-object-tibble"><span class="toc-section-number">7.4</span> The resulting object: <code>tibble</code></a></li>
<li><a href="7-5-conclusion-3.html#conclusion-3"><span class="toc-section-number">7.5</span> Conclusion</a></li>
</ul></li>
<li><a href="8-chap-wrassp.html#chap:wrassp"><span class="toc-section-number">8</span> The R package <code>wrassp</code></a>
<ul>
<li><a href="8-1-introduction.html#introduction"><span class="toc-section-number">8.1</span> Introduction</a></li>
<li><a href="8-2-file-i0-and-the-asspdataobj.html#file-i0-and-the-asspdataobj"><span class="toc-section-number">8.2</span> File I/0 and the <code>AsspDataObj</code></a></li>
<li><a href="8-3-signal-processing.html#signal-processing"><span class="toc-section-number">8.3</span> Signal processing</a></li>
<li><a href="8-4-subsec-wrassp-wrasspOutputInfos.html#subsec:wrassp-wrasspOutputInfos"><span class="toc-section-number">8.4</span> The <code>wrasspOutputInfos</code> object</a></li>
<li><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp-formants"><span class="toc-section-number">8.5</span> Formants and their bandwidths</a>
<ul>
<li><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp-f0"><span class="toc-section-number">8.5.1</span> Fundamental frequency contour</a></li>
<li><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp-RMS"><span class="toc-section-number">8.5.2</span> RMS energy contour</a></li>
</ul></li>
<li><a href="8-6-sec-wrassp-logging.html#sec:wrassp-logging"><span class="toc-section-number">8.6</span> Logging <code>wrassp</code>’s function calls</a></li>
<li><a href="8-7-sec-wrassp-emu-sdms.html#sec:wrassp-emu-sdms"><span class="toc-section-number">8.7</span> Using <code>wrassp</code> in the EMU-SDMS</a></li>
<li><a href="8-8-sec-wrassp-genSSFF.html#sec:wrassp-genSSFF"><span class="toc-section-number">8.8</span> Storing data in the SSFF file format</a></li>
<li><a href="8-9-conclusion-4.html#conclusion-4"><span class="toc-section-number">8.9</span> Conclusion</a></li>
</ul></li>
<li><a href="9-chap-emu-webApp.html#chap:emu-webApp"><span class="toc-section-number">9</span> The <code>EMU-webApp</code></a>
<ul>
<li><a href="9-1-sec-emu-webApp-mainLayout.html#sec:emu-webApp-mainLayout"><span class="toc-section-number">9.1</span> Main layout</a></li>
<li><a href="9-2-sec-webApp-generalUsage.html#sec:webApp-generalUsage"><span class="toc-section-number">9.2</span> General usage</a>
<ul>
<li><a href="9-2-sec-webApp-generalUsage.html#annotating-levels-containing-time-information"><span class="toc-section-number">9.2.1</span> Annotating levels containing time information</a></li>
<li><a href="9-2-sec-webApp-generalUsage.html#working-with-hierarchical-annotations-2-chapemu-webapp"><span class="toc-section-number">9.2.2</span> Working with hierarchical annotations</a></li>
</ul></li>
<li><a href="9-3-configuring-the-emu-webapp.html#configuring-the-emu-webapp"><span class="toc-section-number">9.3</span> Configuring the <code>EMU-webApp</code></a>
<ul>
<li><a href="9-3-configuring-the-emu-webapp.html#subsec:emu-webAppConfigWithEmuR"><span class="toc-section-number">9.3.1</span> Basic configurations using <code>emuR</code></a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#signal-canvas-and-level-canvas-order"><span class="toc-section-number">9.3.2</span> Signal canvas and level canvas order</a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#subsec:emu-webAppAdvancedConfig"><span class="toc-section-number">9.3.3</span> Advanced configurations made by editing the <code>_DBconfig.json</code></a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#d-canvas"><span class="toc-section-number">9.3.4</span> 2D canvas</a></li>
</ul></li>
<li><a href="9-4-conclusion-5.html#conclusion-5"><span class="toc-section-number">9.4</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Main <code>emuR</code> function and object index</b></span></li>
<li><a href="10-chap-emuRpackageDetails.html#chap:emuRpackageDetails"><span class="toc-section-number">10</span> <code>emuR</code> - package functions</a>
<ul>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#sec:emuRpackageDetails-importRoutines"><span class="toc-section-number">10.1</span> Import and conversion routines</a>
<ul>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#legacy-emu-databases"><span class="toc-section-number">10.1.1</span> Legacy EMU databases</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#textgrid-collections"><span class="toc-section-number">10.1.2</span> TextGrid collections</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#bpf-collections"><span class="toc-section-number">10.1.3</span> BPF collections</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#txt-collections"><span class="toc-section-number">10.1.4</span> txt collections</a></li>
</ul></li>
<li><a href="10-2-sec-emuRpackageDetails-emuDBinteract.html#sec:emuRpackageDetails-emuDBinteract"><span class="toc-section-number">10.2</span> <code>emuDB</code> interaction and configuration routines</a></li>
<li><a href="10-3-sec-emuRpackageDetails-emuWebAppConfig.html#sec:emuRpackageDetails-emuWebAppConfig"><span class="toc-section-number">10.3</span> <code>EMU-webApp</code> configuration routines</a></li>
<li><a href="10-4-sec-emuRpackageDetails-dataExtr.html#sec:emuRpackageDetails-dataExtr"><span class="toc-section-number">10.4</span> Data extraction routines</a></li>
<li><a href="10-5-sec-emuRpackageDetails-centralObjects.html#sec:emuRpackageDetails-centralObjects"><span class="toc-section-number">10.5</span> Central objects</a></li>
<li><a href="10-6-sec-emuRpackageDetails-exportRoutines.html#sec:emuRpackageDetails-exportRoutines"><span class="toc-section-number">10.6</span> Export routines</a></li>
<li><a href="10-7-conclusion-6.html#conclusion-6"><span class="toc-section-number">10.7</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>IV Implementation</b></span></li>
<li><a href="11-chap-querysys-impl.html#chap:querysys-impl"><span class="toc-section-number">11</span> Implementation of the query system</a>
<ul>
<li><a href="11-1-sec-query-queryExpressionParser.html#sec:query-queryExpressionParser"><span class="toc-section-number">11.1</span> Query expression parser</a></li>
<li><a href="11-2-subsec-query-redundantLinks.html#subsec:query-redundantLinks"><span class="toc-section-number">11.2</span> Redundant links</a></li>
</ul></li>
<li><a href="12-chap-wrassp-impl.html#chap:wrassp_impl"><span class="toc-section-number">12</span> <code>wrassp</code> implementation</a>
<ul>
<li><a href="12-1-the-libassp-port.html#the-libassp-port"><span class="toc-section-number">12.1</span> The <code>libassp</code> port</a></li>
</ul></li>
<li><a href="13-chap-emu-webAppImplementation.html#chap:emu-webAppImplementation"><span class="toc-section-number">13</span> <code>EMU-webApp</code> implementation</a>
<ul>
<li><a href="13-1-subsec-emu-webAppTheProtocol.html#subsec:emu-webAppTheProtocol"><span class="toc-section-number">13.1</span> Communication protocol</a></li>
<li><a href="13-2-url-parameters.html#url-parameters"><span class="toc-section-number">13.2</span> URL parameters</a>
<ul>
<li><a href="13-2-url-parameters.html#websocket-server-parameters"><span class="toc-section-number">13.2.1</span> Websocket server parameters</a></li>
<li><a href="13-2-url-parameters.html#examples"><span class="toc-section-number">13.2.2</span> Examples</a></li>
<li><a href="13-2-url-parameters.html#label-file-preview-parameters"><span class="toc-section-number">13.2.3</span> Label file preview parameters</a></li>
<li><a href="13-2-url-parameters.html#examples-1"><span class="toc-section-number">13.2.4</span> Examples</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Appendices</b></span></li>
<li><a href="14-app-chap-useCases.html#app-chap:useCases"><span class="toc-section-number">14</span> Use cases</a>
<ul>
<li><a href="14-1-sec-app-chap-useCases-q1.html#sec:app-chap-useCases-q1"><span class="toc-section-number">14.1</span> What is the average length of all <em>n</em> phonetic segments in the <em>ae</em> <code>emuDB</code>?</a></li>
<li><a href="14-2-sec-app-chap-useCases-q2.html#sec:app-chap-useCases-q2"><span class="toc-section-number">14.2</span> What does the F1 and F2 distribution of all phonetic segments that contain the labels <em>I</em>, <em>o:</em>, <em>u:</em>, <em>V</em> or <em>@</em> look like?</a></li>
<li><a href="14-3-sec-app-chap-useCases-q3.html#sec:app-chap-useCases-q3"><span class="toc-section-number">14.3</span> What words do the phonetic segments that carry the labels <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> occur in and what is their phonetic context?</a></li>
<li><a href="14-4-sec-app-chap-useCases-q4.html#sec:app-chap-useCases-q4"><span class="toc-section-number">14.4</span> Do the phonetic segments labeled <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> differ with respect to their first spectral moment?\footnote{The original version of this use case was written by Florian Schiel as part of the <code>emuR_intro</code> vignette that is part of the <code>emuR</code> package.</a>
<ul>
<li><a href="14-4-sec-app-chap-useCases-q4.html#note-see-refrecipespectralanalysis-for-more-up-to-date-methods-of-performing-spectral-analysis"><span class="toc-section-number">14.4.1</span> NOTE: See @ref(recipe:spectralAnalysis) for more up to date methods of performing spectral analysis</a></li>
</ul></li>
</ul></li>
<li><a href="15-app-chap-fileFormats.html#app-chap:fileFormats"><span class="toc-section-number">15</span> File Formats</a>
<ul>
<li><a href="15-1-file-descriptions.html#file-descriptions"><span class="toc-section-number">15.1</span> File descriptions</a>
<ul>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsDBconfig"><span class="toc-section-number">15.1.1</span> <code>_DBconfig.json</code></a></li>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsAnnotJSON"><span class="toc-section-number">15.1.2</span> <code>_annot.json</code></a></li>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsSSFF"><span class="toc-section-number">15.1.3</span> The SSFF file format</a></li>
</ul></li>
<li><a href="15-2-example-files.html#example-files"><span class="toc-section-number">15.2</span> Example files</a>
<ul>
<li><a href="15-2-example-files.html#subsec:app-chapExampleFilesBundleList"><span class="toc-section-number">15.2.1</span> <code>_bundleList.json</code></a></li>
<li><a href="15-2-example-files.html#subsec:app-chapExampleFilesBndlJSON"><span class="toc-section-number">15.2.2</span> <code>_bndl.json</code></a></li>
</ul></li>
</ul></li>
<li><a href="16-app-chap-wsProtocol.html#app-chap:wsProtocol"><span class="toc-section-number">16</span> The <code>EMU-webApp-websocket-protocol</code> Version 2.0</a>
<ul>
<li><a href="16-1-protocol-overview.html#protocol-overview"><span class="toc-section-number">16.1</span> Protocol overview</a></li>
<li><a href="16-2-protocol-commands.html#protocol-commands"><span class="toc-section-number">16.2</span> Protocol commands</a>
<ul>
<li><a href="16-2-protocol-commands.html#getprotocol"><span class="toc-section-number">16.2.1</span> <code>GETPROTOCOL</code></a></li>
<li><a href="16-2-protocol-commands.html#getdousermanagement"><span class="toc-section-number">16.2.2</span> <code>GETDOUSERMANAGEMENT</code></a></li>
<li><a href="16-2-protocol-commands.html#logonuser"><span class="toc-section-number">16.2.3</span> <code>LOGONUSER</code></a></li>
<li><a href="16-2-protocol-commands.html#getglobaldbconfig"><span class="toc-section-number">16.2.4</span> <code>GETGLOBALDBCONFIG</code></a></li>
<li><a href="16-2-protocol-commands.html#getbundlelist"><span class="toc-section-number">16.2.5</span> <code>GETBUNDLELIST</code></a></li>
<li><a href="16-2-protocol-commands.html#getbundle"><span class="toc-section-number">16.2.6</span> <code>GETBUNDLE</code></a></li>
<li><a href="16-2-protocol-commands.html#savebundle"><span class="toc-section-number">16.2.7</span> <code>SAVEBUNDLE</code></a></li>
<li><a href="16-2-protocol-commands.html#disconnectwarning"><span class="toc-section-number">16.2.8</span> <code>DISCONNECTWARNING</code></a></li>
<li><a href="16-2-protocol-commands.html#error-handling"><span class="toc-section-number">16.2.9</span> Error handling</a></li>
</ul></li>
</ul></li>
<li><a href="17-app-chap-EQL-EBNF.html#app-chap:EQL-EBNF"><span class="toc-section-number">17</span> EQL EBNF</a>
<ul>
<li><a href="17-1-terminal-symbols-of-eql2-operators-and-their-meaning.html#terminal-symbols-of-eql2-operators-and-their-meaning"><span class="toc-section-number">17.1</span> Terminal symbols of EQL2 (operators) and their meaning</a></li>
<li><a href="17-2-terminal-symbols-of-eql2-brackets-and-their-meanings-.html#terminal-symbols-of-eql2-brackets-and-their-meanings."><span class="toc-section-number">17.2</span> Terminal symbols of EQL2 (brackets) and their meanings.</a></li>
<li><a href="17-3-terminal-symbols-of-eql2-functions-and-their-meanings-.html#terminal-symbols-of-eql2-functions-and-their-meanings."><span class="toc-section-number">17.3</span> Terminal symbols of EQL2 (functions) and their meanings.</a></li>
<li><a href="17-4-formal-description-of-emu-query-language-version-2.html#formal-description-of-emu-query-language-version-2"><span class="toc-section-number">17.4</span> Formal description of EMU Query Language Version 2</a></li>
<li><a href="17-5-restrictions.html#restrictions"><span class="toc-section-number">17.5</span> Restrictions</a></li>
</ul></li>
<li><a href="18-app-chap-eql.html#app-chap:eql"><span class="toc-section-number">18</span> EQL: further examples</a>
<ul>
<li><a href="18-1-simple-equality-inequality-matching-non-matching-queries-single-argument.html#simple-equality-inequality-matching-non-matching-queries-single-argument"><span class="toc-section-number">18.1</span> Simple equality, inequality, matching and non-matching queries (single-argument)</a></li>
<li><a href="18-2-sequence-queries-using-the-sequence-operator.html#sequence-queries-using-the---sequence-operator"><span class="toc-section-number">18.2</span> Sequence queries using the -&gt; sequence operator</a></li>
<li><a href="18-3-subsequent-sequence-queries-using-nesting-of-the-sequence-operator.html#subsequent-sequence-queries-using-nesting-of-the---sequence-operator"><span class="toc-section-number">18.3</span> Subsequent sequence queries using nesting of the <code>-&gt;</code> sequence operator</a></li>
<li><a href="18-4-conjunction-operator.html#conjunction-operator"><span class="toc-section-number">18.4</span> Conjunction operator &amp;</a></li>
<li><a href="18-5-domination-operator-hierarchical-queries.html#domination-operator-hierarchical-queries"><span class="toc-section-number">18.5</span> Domination operator ^ (hierarchical queries)</a>
<ul>
<li><a href="18-5-domination-operator-hierarchical-queries.html#simple-domination"><span class="toc-section-number">18.5.1</span> Simple domination</a></li>
<li><a href="18-5-domination-operator-hierarchical-queries.html#multiple-domination"><span class="toc-section-number">18.5.2</span> Multiple domination</a></li>
</ul></li>
<li><a href="18-6-position.html#position"><span class="toc-section-number">18.6</span> Position</a>
<ul>
<li><a href="18-6-position.html#simple-usage-of-start-end-and-medial"><span class="toc-section-number">18.6.1</span> Simple usage of <code>Start()</code>, <code>End()</code> and <code>Medial()</code></a></li>
<li><a href="18-6-position.html#position-and-boolean"><span class="toc-section-number">18.6.2</span> Position and boolean &amp;</a></li>
<li><a href="18-6-position.html#position-and-boolean-1"><span class="toc-section-number">18.6.3</span> Position and boolean ^</a></li>
<li><a href="18-6-position.html#count-and-boolean"><span class="toc-section-number">18.6.4</span> Count and boolean <code>&amp;</code></a></li>
<li><a href="18-6-position.html#count-and"><span class="toc-section-number">18.6.5</span> Count and ^</a></li>
</ul></li>
<li><a href="18-7-combinations.html#combinations"><span class="toc-section-number">18.7</span> Combinations</a>
<ul>
<li><a href="18-7-combinations.html#and---domination-and-sequence"><span class="toc-section-number">18.7.1</span> ^ and -&gt; (domination and sequence)</a></li>
<li><a href="18-7-combinations.html#and---and-domination-and-sequence-and-boolean"><span class="toc-section-number">18.7.2</span> ^ and -&gt; and &amp; (domination and sequence and boolean &amp;)</a></li>
</ul></li>
<li><a href="18-8-a-few-more-questions-and-answers.html#a-few-more-questions-and-answers"><span class="toc-section-number">18.8</span> A few more questions and answers</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#differences-to-the-legacy-emu-query-language"><span class="toc-section-number">18.9</span> Differences to the legacy EMU query language</a>
<ul>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#function-call-syntax"><span class="toc-section-number">18.9.1</span> Function call syntax</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#empty-result"><span class="toc-section-number">18.9.2</span> Empty result</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#the-result-modifier-hash-tag"><span class="toc-section-number">18.9.3</span> The result modifier hash tag <code>#</code></a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#interpretation-of-the-hash-tag-in-conjunction-operator-queries"><span class="toc-section-number">18.9.4</span> Interpretation of the hash tag <code>#</code> in conjunction operator queries</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#legacy-emu"><span class="toc-section-number">18.9.5</span> legacy EMU</a></li>
</ul></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#bugs-in-legacy-emu-function-emu.query"><span class="toc-section-number">18.10</span> Bugs in legacy EMU function <code>emu.query()</code></a>
<ul>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#alternative-labels-in-inequality-queries"><span class="toc-section-number">18.10.1</span> Alternative labels in inequality queries</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#legacy-emu-1"><span class="toc-section-number">18.10.2</span> legacy EMU</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#emur-1"><span class="toc-section-number">18.10.3</span> emuR</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#errors-caused-by-missing-or-superfluous-blanks-or-parentheses"><span class="toc-section-number">18.10.4</span> Errors caused by missing or superfluous blanks or parentheses</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#order-of-result-segment-list"><span class="toc-section-number">18.10.5</span> Order of result segment list</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#additional-features"><span class="toc-section-number">18.10.6</span> Additional features</a></li>
</ul></li>
</ul></li>
<li><a href="19-app-chap-wrassp.html#app-chap:wrassp"><span class="toc-section-number">19</span> <code>wrassp</code></a>
<ul>
<li><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#sec:app-chap-wrassp-praatsSigProc"><span class="toc-section-number">19.1</span> Using Praat’s signal processing routines in the EMU-SDMS</a>
<ul>
<li><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#to-formant-burg-to-ssff-files"><span class="toc-section-number">19.1.1</span> <code>To Formant (burg)</code> to SSFF files</a></li>
</ul></li>
<li><a href="19-2-sec-app-chap-wrassp-opensmileSigProc.html#sec:app-chap-wrassp-opensmileSigProc"><span class="toc-section-number">19.2</span> Using OpenSMILE signal processing routines in the EMU-SDMS</a></li>
</ul></li>
<li class="part"><span><b>VI Recipes</b></span></li>
<li><a href="20-about.html#about"><span class="toc-section-number">20</span> About</a></li>
<li><a href="21-recipe-spectralAnalysis.html#recipe:spectralAnalysis"><span class="toc-section-number">21</span> Spectral analysis</a>
<ul>
<li><a href="21-1-how-to-quantify-differences-between-spectra.html#how-to-quantify-differences-between-spectra"><span class="toc-section-number">21.1</span> How to quantify differences between spectra?</a></li>
<li><a href="21-2-discrete-cosine-transform-dct.html#discrete-cosine-transform-dct"><span class="toc-section-number">21.2</span> Discrete Cosine Transform (DCT)</a></li>
<li><a href="21-3-dct-coefficients.html#dct-coefficients"><span class="toc-section-number">21.3</span> DCT coefficients</a>
<ul>
<li><a href="21-3-dct-coefficients.html#p.s.-use-dct-in-order-to-smooth-formant-trajectories"><span class="toc-section-number">21.3.1</span> P.S.: Use DCT in order to smooth formant trajectories</a></li>
</ul></li>
<li><a href="21-4-spectral-moments.html#spectral-moments"><span class="toc-section-number">21.4</span> Spectral moments</a></li>
</ul></li>
<li><a href="22-recipe-plottingSnippets.html#recipe:plottingSnippets"><span class="toc-section-number">22</span> Plotting snippets</a>
<ul>
<li><a href="22-1-formant-trajectory-plots-equivalent-to-the-legacy-dplot-normalise-tf-average-tf-.html#formant-trajectory-plots-equivalent-to-the-legacy-dplot...-normalise-tf-average-tf..."><span class="toc-section-number">22.1</span> Formant trajectory plots (equivalent to the legacy <code>dplot(..., normalise = T/F, average = T/F,...)</code>)</a></li>
<li><a href="22-2-f1f2-plots-equivalent-to-the-legacy-eplot-dopoints-tf-doellipse-tf-centroid-tf-.html#f1f2-plots-equivalent-to-the-legacy-eplot...-dopoints-tf-doellipse-tf-centroid-tf-..."><span class="toc-section-number">22.2</span> F1/F2 plots (equivalent to the legacy <code>eplot(..., dopoints = T/F, doellipse = T/F, centroid = T/F, ...)</code>)</a></li>
<li><a href="22-3-f1f2-plot-separated-by-speaker.html#f1f2-plot-separated-by-speaker"><span class="toc-section-number">22.3</span> F1/F2 plot separated by speaker</a></li>
</ul></li>
<li><a href="23-version-control-of-emudbs-including-collaborative-annotation-with-git-and-gitlab.html#version-control-of-emudbs-including-collaborative-annotation-with-git-and-gitlab"><span class="toc-section-number">23</span> Version control of emuDBs including collaborative annotation with Git and GitLab</a>
<ul>
<li><a href="23-1-setup.html#setup"><span class="toc-section-number">23.1</span> Setup</a>
<ul>
<li><a href="23-1-setup.html#using-gitlab-to-host-the-emudb"><span class="toc-section-number">23.1.1</span> Using GitLab to host the emuDB</a></li>
</ul></li>
<li><a href="23-2-collaborating-with-others.html#collaborating-with-others"><span class="toc-section-number">23.2</span> Collaborating with others</a>
<ul>
<li><a href="23-2-collaborating-with-others.html#default-work-flow"><span class="toc-section-number">23.2.1</span> Default work-flow</a></li>
<li><a href="23-2-collaborating-with-others.html#assigning-bundles-to-annotators"><span class="toc-section-number">23.2.2</span> Assigning bundles to annotators</a></li>
<li><a href="23-2-collaborating-with-others.html#pointing-the-emu-webapp-to-the-gitlab-repository"><span class="toc-section-number">23.2.3</span> Pointing the EMU-webApp to the GitLab repository</a></li>
<li><a href="23-2-collaborating-with-others.html#what-about-my-r-scripts-other-files"><span class="toc-section-number">23.2.4</span> What about my R scripts / other files?</a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="sec:app-chap-wrassp-praatsSigProc" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Using Praat’s signal processing routines in the EMU-SDMS</h2>
<div id="to-formant-burg-to-ssff-files" class="section level3" number="19.1.1">
<h3><span class="header-section-number">19.1.1</span> <code>To Formant (burg)</code> to SSFF files</h3>
<p>The R code snippet below shows how to generate <code>AsspDataObj</code> objects from scratch and place data from other sources into SSFF files. The snippet uses <a href="https://stefanocoretta.github.io/speakr/">speakr</a>, an R package to run Praat scripts from within R. The function <code>praat2AsspDataObj()</code> runs a Praat script (generated by <code>write_praat_script()</code>) that executes a Praat command on a given sound file, either <code>To Formant (burg)</code> or <code>To Pitch</code>. The <code>Formant</code> and <code>PitchTier</code> objects created with these commands is then converted to a comma-separated table with <code>Down to Table</code> and <code>Down to PitchTier</code> respectively. The generated table/tier is then read into R and the appropriate columns are placed into tracks of a <code>AsspDataObj</code> object. The <code>Praat2AsspDataObj</code> can be viewed as a template function as it can be adapted to use other functions provided by Praat or even other external tools.</p>
<p><strong>NOTE</strong>. These functions can be sourced into your R session directly with:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;https://raw.githubusercontent.com/IPS-LMU/The-EMU-SDMS-Manual/master/R/praat2AsspDataObj.R&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-2"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The script uses speakr::praat_run()</span></span>
<span id="cb384-3"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The following will install speakr if not already installed</span></span>
<span id="cb384-4"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;speakr&quot;</span>, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb384-5"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;speakr&quot;</span>, <span class="at">dependences =</span> <span class="cn">TRUE</span>)</span>
<span id="cb384-6"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb384-7"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-8"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(speakr) <span class="co"># this is currently necessary to find the Praat executable</span></span>
<span id="cb384-9"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-10"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Convert the output of a Praat procedure to a ASSP data object</span></span>
<span id="cb384-11"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb384-12"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; This function creates a Praat object from a sound file (available outputs:</span></span>
<span id="cb384-13"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; &quot;formants&quot;) and converts it into an ASSP data object which can be read by</span></span>
<span id="cb384-14"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; wrassp.</span></span>
<span id="cb384-15"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb384-16"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param path Path to the .wav file.</span></span>
<span id="cb384-17"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param object Praat object to generate (`&quot;formant&quot;` or `&quot;pitch&quot;`).</span></span>
<span id="cb384-18"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param time_step Praat argument: The time between the centres of consecutive analysis frames.</span></span>
<span id="cb384-19"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param max_fm Formant argument: Maximum number of formants per frames.</span></span>
<span id="cb384-20"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param ceiling Formant argument: The maximum frequency of the formant search range in Hz.</span></span>
<span id="cb384-21"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param window Formant argument: The effective duration of the analysis window in seconds.</span></span>
<span id="cb384-22"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param pre_emph Formant argument: The +3 dB point for an inverted low-pass filter with a slope of +6 dB/octave.</span></span>
<span id="cb384-23"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param pitch_floor Pitch argument: Candidates below this frequency will not be recruited.</span></span>
<span id="cb384-24"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param pitch_ceiling Pitch argument: Candidates above this frequency will be ignored.</span></span>
<span id="cb384-25"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param pitch_units Pitch argument: Pitch unit as character (`&quot;Herz&quot;` or `&quot;semitones&quot;`).</span></span>
<span id="cb384-26"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param smooth Pitch argument: If `TRUE`, the pitch track is smoothed using `smooth_bw` as bandwidth.</span></span>
<span id="cb384-27"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param smooth_bw Pitch argument: Smoothing bandwidth in Hz.</span></span>
<span id="cb384-28"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-28" aria-hidden="true" tabindex="-1"></a>praat2AsspDataObj <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb384-29"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-29" aria-hidden="true" tabindex="-1"></a>  path,</span>
<span id="cb384-30"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;formant&quot;</span>,</span>
<span id="cb384-31"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">time_step =</span> <span class="fl">0.0</span>,</span>
<span id="cb384-32"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># formant settings</span></span>
<span id="cb384-33"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_fm =</span> <span class="dv">5</span>,</span>
<span id="cb384-34"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">ceiling =</span> <span class="fl">5500.0</span>,</span>
<span id="cb384-35"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="fl">0.025</span>,</span>
<span id="cb384-36"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">pre_emph =</span> <span class="fl">50.0</span>,</span>
<span id="cb384-37"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pitch settings</span></span>
<span id="cb384-38"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">pitch_floor =</span> <span class="fl">75.0</span>,</span>
<span id="cb384-39"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">pitch_ceiling =</span> <span class="fl">600.0</span>,</span>
<span id="cb384-40"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">pitch_units =</span> <span class="st">&quot;Hertz&quot;</span>,</span>
<span id="cb384-41"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">smooth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb384-42"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">smooth_bw =</span> <span class="fl">10.0</span></span>
<span id="cb384-43"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-43" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb384-44"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-45"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Praat script path</span></span>
<span id="cb384-46"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-46" aria-hidden="true" tabindex="-1"></a>  tmpPraatScript <span class="ot">=</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;script.praat&quot;</span>)</span>
<span id="cb384-47"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tmp Praat output path</span></span>
<span id="cb384-48"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-48" aria-hidden="true" tabindex="-1"></a>  tmpPraatOut <span class="ot">=</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;out.table&quot;</span>)</span>
<span id="cb384-49"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-50"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove tmp files if they already exist</span></span>
<span id="cb384-51"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlink</span>(tmpPraatScript)</span>
<span id="cb384-52"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlink</span>(tmpPraatOut)</span>
<span id="cb384-53"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-54"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># write Praat script to tmp location</span></span>
<span id="cb384-55"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_praat_script</span>(object, tmpPraatScript)</span>
<span id="cb384-56"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-57"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-57" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (object <span class="sc">==</span> <span class="st">&quot;formant&quot;</span>) {</span>
<span id="cb384-58"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-58" aria-hidden="true" tabindex="-1"></a>    ado <span class="ot">&lt;-</span> <span class="fu">praat_run_formant</span>(tmpPraatScript,</span>
<span id="cb384-59"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-59" aria-hidden="true" tabindex="-1"></a>                             path,</span>
<span id="cb384-60"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-60" aria-hidden="true" tabindex="-1"></a>                             time_step,</span>
<span id="cb384-61"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-61" aria-hidden="true" tabindex="-1"></a>                             max_fm,</span>
<span id="cb384-62"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-62" aria-hidden="true" tabindex="-1"></a>                             ceiling,</span>
<span id="cb384-63"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-63" aria-hidden="true" tabindex="-1"></a>                             window,</span>
<span id="cb384-64"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-64" aria-hidden="true" tabindex="-1"></a>                             pre_emph,</span>
<span id="cb384-65"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-65" aria-hidden="true" tabindex="-1"></a>                             tmpPraatOut,</span>
<span id="cb384-66"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-66" aria-hidden="true" tabindex="-1"></a>                             <span class="at">columnNames =</span> <span class="fu">c</span>(<span class="st">&quot;fm&quot;</span>, <span class="st">&quot;bw&quot;</span>))</span>
<span id="cb384-67"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-67" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (object <span class="sc">==</span> <span class="st">&quot;pitch&quot;</span>) {</span>
<span id="cb384-68"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-68" aria-hidden="true" tabindex="-1"></a>    tmpPitchInfo <span class="ot">=</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;pitchInfo.csv&quot;</span>)</span>
<span id="cb384-69"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlink</span>(tmpPitchInfo)</span>
<span id="cb384-70"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-71"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-71" aria-hidden="true" tabindex="-1"></a>    ado <span class="ot">&lt;-</span> <span class="fu">praat_run_pitch</span>(tmpPraatScript,</span>
<span id="cb384-72"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-72" aria-hidden="true" tabindex="-1"></a>                            path,</span>
<span id="cb384-73"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-73" aria-hidden="true" tabindex="-1"></a>                            time_step,</span>
<span id="cb384-74"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-74" aria-hidden="true" tabindex="-1"></a>                            pitch_floor,</span>
<span id="cb384-75"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-75" aria-hidden="true" tabindex="-1"></a>                            pitch_ceiling,</span>
<span id="cb384-76"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-76" aria-hidden="true" tabindex="-1"></a>                            pitch_units,</span>
<span id="cb384-77"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-77" aria-hidden="true" tabindex="-1"></a>                            smooth,</span>
<span id="cb384-78"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-78" aria-hidden="true" tabindex="-1"></a>                            smooth_bw,</span>
<span id="cb384-79"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-79" aria-hidden="true" tabindex="-1"></a>                            tmpPraatOut,</span>
<span id="cb384-80"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-80" aria-hidden="true" tabindex="-1"></a>                            tmpPitchInfo,</span>
<span id="cb384-81"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-81" aria-hidden="true" tabindex="-1"></a>                            <span class="at">columnNames =</span> <span class="fu">c</span>(<span class="st">&quot;f0&quot;</span>))</span>
<span id="cb384-82"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-82" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-83"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-84"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ado)</span>
<span id="cb384-85"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-85" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb384-86"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-87"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-88"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-88" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-89"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-89" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb384-90"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-90" aria-hidden="true" tabindex="-1"></a><span class="co"># function to run Praat formant script</span></span>
<span id="cb384-91"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-91" aria-hidden="true" tabindex="-1"></a>praat_run_formant <span class="ot">&lt;-</span> <span class="cf">function</span>(tmpPraatScript,</span>
<span id="cb384-92"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-92" aria-hidden="true" tabindex="-1"></a>                             path,</span>
<span id="cb384-93"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-93" aria-hidden="true" tabindex="-1"></a>                             time_step,</span>
<span id="cb384-94"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-94" aria-hidden="true" tabindex="-1"></a>                             max_fm,</span>
<span id="cb384-95"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-95" aria-hidden="true" tabindex="-1"></a>                             ceiling,</span>
<span id="cb384-96"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-96" aria-hidden="true" tabindex="-1"></a>                             window,</span>
<span id="cb384-97"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-97" aria-hidden="true" tabindex="-1"></a>                             pre_emph,</span>
<span id="cb384-98"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-98" aria-hidden="true" tabindex="-1"></a>                             tmpPraatOut,</span>
<span id="cb384-99"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-99" aria-hidden="true" tabindex="-1"></a>                             columnNames) {</span>
<span id="cb384-100"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-100" aria-hidden="true" tabindex="-1"></a>  <span class="co"># run Praat script</span></span>
<span id="cb384-101"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-101" aria-hidden="true" tabindex="-1"></a>  speakr<span class="sc">::</span><span class="fu">praat_run</span>(</span>
<span id="cb384-102"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-102" aria-hidden="true" tabindex="-1"></a>    tmpPraatScript,</span>
<span id="cb384-103"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-103" aria-hidden="true" tabindex="-1"></a>    path,</span>
<span id="cb384-104"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-104" aria-hidden="true" tabindex="-1"></a>    time_step,</span>
<span id="cb384-105"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-105" aria-hidden="true" tabindex="-1"></a>    max_fm,</span>
<span id="cb384-106"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-106" aria-hidden="true" tabindex="-1"></a>    ceiling,</span>
<span id="cb384-107"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-107" aria-hidden="true" tabindex="-1"></a>    window,</span>
<span id="cb384-108"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-108" aria-hidden="true" tabindex="-1"></a>    pre_emph,</span>
<span id="cb384-109"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-109" aria-hidden="true" tabindex="-1"></a>    tmpPraatOut</span>
<span id="cb384-110"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-110" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb384-111"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-112"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-112" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get vals</span></span>
<span id="cb384-113"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-113" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">=</span> <span class="fu">read.csv</span>(tmpPraatOut, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb384-114"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-114" aria-hidden="true" tabindex="-1"></a>  df[df <span class="sc">==</span> <span class="st">&#39;--undefined--&#39;</span>] <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb384-115"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-116"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-116" aria-hidden="true" tabindex="-1"></a>  fmVals <span class="ot">=</span> df[,<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>)]</span>
<span id="cb384-117"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-117" aria-hidden="true" tabindex="-1"></a>  fmVals <span class="ot">=</span> <span class="fu">sapply</span>(<span class="fu">colnames</span>(fmVals), <span class="cf">function</span>(x){</span>
<span id="cb384-118"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(fmVals[,x])</span>
<span id="cb384-119"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-119" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb384-120"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(fmVals) <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb384-121"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-121" aria-hidden="true" tabindex="-1"></a>  bwVals <span class="ot">=</span> <span class="fu">data.matrix</span>(df[,<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>)])</span>
<span id="cb384-122"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-122" aria-hidden="true" tabindex="-1"></a>  bwVals <span class="ot">=</span> <span class="fu">sapply</span>(<span class="fu">colnames</span>(bwVals), <span class="cf">function</span>(x){</span>
<span id="cb384-123"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(bwVals[,x])</span>
<span id="cb384-124"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-124" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb384-125"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(bwVals) <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb384-126"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-127"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-127" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get start time</span></span>
<span id="cb384-128"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-128" aria-hidden="true" tabindex="-1"></a>  startTime <span class="ot">=</span> df[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb384-129"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-130"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-130" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create AsspDataObj</span></span>
<span id="cb384-131"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-131" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb384-132"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-133"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) <span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;INT16&quot;</span>, <span class="st">&quot;INT16&quot;</span>)</span>
<span id="cb384-134"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-135"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(time_step <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb384-136"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-136" aria-hidden="true" tabindex="-1"></a>    sR <span class="ot">=</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="fl">0.25</span> <span class="sc">*</span> window)</span>
<span id="cb384-137"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-137" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb384-138"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-138" aria-hidden="true" tabindex="-1"></a>    sR <span class="ot">=</span> <span class="dv">1</span> <span class="sc">/</span> time_step</span>
<span id="cb384-139"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-139" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-140"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-141"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;sampleRate&quot;</span>) <span class="ot">=</span> sR</span>
<span id="cb384-142"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-143"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-143" aria-hidden="true" tabindex="-1"></a>  tmpObj <span class="ot">=</span> wrassp<span class="sc">::</span><span class="fu">read.AsspDataObj</span>(path)</span>
<span id="cb384-144"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;origFreq&quot;</span>) <span class="ot">=</span> <span class="fu">attr</span>(tmpObj, <span class="st">&quot;sampleRate&quot;</span>)</span>
<span id="cb384-145"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-146"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) <span class="ot">=</span> startTime</span>
<span id="cb384-147"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-148"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-148" aria-hidden="true" tabindex="-1"></a>  <span class="co"># attr(ado, &quot;startRecord&quot;) = as.integer(1)</span></span>
<span id="cb384-149"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-150"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;endRecord&quot;</span>) <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">nrow</span>(fmVals))</span>
<span id="cb384-151"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-152"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(ado) <span class="ot">=</span> <span class="st">&quot;AsspDataObj&quot;</span></span>
<span id="cb384-153"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-154"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-154" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">AsspFileFormat</span>(ado) <span class="ot">&lt;-</span> <span class="st">&quot;SSFF&quot;</span></span>
<span id="cb384-155"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-155" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">AsspDataFormat</span>(ado) <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">2</span>) <span class="co"># == binary</span></span>
<span id="cb384-156"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-157"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-157" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> wrassp<span class="sc">::</span><span class="fu">addTrack</span>(ado, columnNames[<span class="dv">1</span>], fmVals, <span class="st">&quot;INT16&quot;</span>)</span>
<span id="cb384-158"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-159"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-159" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> wrassp<span class="sc">::</span><span class="fu">addTrack</span>(ado, columnNames[<span class="dv">2</span>], bwVals, <span class="st">&quot;INT16&quot;</span>)</span>
<span id="cb384-160"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-161"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add missing values at the start as Praat sometimes</span></span>
<span id="cb384-162"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-162" aria-hidden="true" tabindex="-1"></a>  <span class="co"># has very late start values which causes issues</span></span>
<span id="cb384-163"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-163" aria-hidden="true" tabindex="-1"></a>  <span class="co"># in the SSFF file format as this sets the startRecord</span></span>
<span id="cb384-164"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-164" aria-hidden="true" tabindex="-1"></a>  <span class="co"># depending on the start time of the first sample</span></span>
<span id="cb384-165"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-165" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(startTime <span class="sc">&gt;</span> <span class="dv">1</span><span class="sc">/</span>sR) {</span>
<span id="cb384-166"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-166" aria-hidden="true" tabindex="-1"></a>    nr_of_missing_samples <span class="ot">=</span> <span class="fu">floor</span>(startTime <span class="sc">/</span> (<span class="dv">1</span><span class="sc">/</span>sR))</span>
<span id="cb384-167"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-168"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-168" aria-hidden="true" tabindex="-1"></a>    missing_fm_vals <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">0</span>,</span>
<span id="cb384-169"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-169" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nrow =</span> nr_of_missing_samples,</span>
<span id="cb384-170"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-170" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ncol =</span> <span class="fu">ncol</span>(ado<span class="sc">$</span>fm))</span>
<span id="cb384-171"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-172"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-172" aria-hidden="true" tabindex="-1"></a>    missing_bw_vals <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">0</span>,</span>
<span id="cb384-173"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-173" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nrow =</span> nr_of_missing_samples,</span>
<span id="cb384-174"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-174" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ncol =</span> <span class="fu">ncol</span>(ado<span class="sc">$</span>bw))</span>
<span id="cb384-175"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-176"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-176" aria-hidden="true" tabindex="-1"></a>    <span class="co"># prepend values</span></span>
<span id="cb384-177"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-177" aria-hidden="true" tabindex="-1"></a>    ado<span class="sc">$</span>fm <span class="ot">=</span> <span class="fu">rbind</span>(missing_fm_vals, ado<span class="sc">$</span>fm)</span>
<span id="cb384-178"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-178" aria-hidden="true" tabindex="-1"></a>    ado<span class="sc">$</span>bw <span class="ot">=</span> <span class="fu">rbind</span>(missing_fm_vals, ado<span class="sc">$</span>bw)</span>
<span id="cb384-179"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-180"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-180" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fix start time</span></span>
<span id="cb384-181"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-181" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) <span class="ot">=</span> startTime <span class="sc">-</span> nr_of_missing_samples <span class="sc">*</span> (<span class="dv">1</span><span class="sc">/</span>sR)</span>
<span id="cb384-182"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-182" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(ado)</span>
<span id="cb384-183"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-183" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-184"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-184" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb384-185"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-186"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-187"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-188"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-189"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-190"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-190" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-191"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-191" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb384-192"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-192" aria-hidden="true" tabindex="-1"></a><span class="co"># function to run Praat formant script</span></span>
<span id="cb384-193"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-193" aria-hidden="true" tabindex="-1"></a>praat_run_pitch <span class="ot">&lt;-</span> <span class="cf">function</span>(tmpPraatScript,</span>
<span id="cb384-194"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-194" aria-hidden="true" tabindex="-1"></a>                            path,</span>
<span id="cb384-195"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-195" aria-hidden="true" tabindex="-1"></a>                            time_step,</span>
<span id="cb384-196"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-196" aria-hidden="true" tabindex="-1"></a>                            pitch_floor,</span>
<span id="cb384-197"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-197" aria-hidden="true" tabindex="-1"></a>                            pitch_ceiling,</span>
<span id="cb384-198"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-198" aria-hidden="true" tabindex="-1"></a>                            pitch_units,</span>
<span id="cb384-199"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-199" aria-hidden="true" tabindex="-1"></a>                            smooth,</span>
<span id="cb384-200"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-200" aria-hidden="true" tabindex="-1"></a>                            smooth_bw,</span>
<span id="cb384-201"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-201" aria-hidden="true" tabindex="-1"></a>                            tmpPraatOut,</span>
<span id="cb384-202"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-202" aria-hidden="true" tabindex="-1"></a>                            tmpPitchInfo,</span>
<span id="cb384-203"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-203" aria-hidden="true" tabindex="-1"></a>                            columnNames) {</span>
<span id="cb384-204"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-204" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (smooth) {</span>
<span id="cb384-205"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-205" aria-hidden="true" tabindex="-1"></a>    smooth <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb384-206"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-206" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb384-207"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-207" aria-hidden="true" tabindex="-1"></a>    smooth <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb384-208"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-208" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-209"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-210"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-210" aria-hidden="true" tabindex="-1"></a>  <span class="co"># run Praat script</span></span>
<span id="cb384-211"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-211" aria-hidden="true" tabindex="-1"></a>  speakr<span class="sc">::</span><span class="fu">praat_run</span>(</span>
<span id="cb384-212"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-212" aria-hidden="true" tabindex="-1"></a>    tmpPraatScript,</span>
<span id="cb384-213"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-213" aria-hidden="true" tabindex="-1"></a>    path,</span>
<span id="cb384-214"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-214" aria-hidden="true" tabindex="-1"></a>    time_step,</span>
<span id="cb384-215"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-215" aria-hidden="true" tabindex="-1"></a>    pitch_floor,</span>
<span id="cb384-216"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-216" aria-hidden="true" tabindex="-1"></a>    pitch_ceiling,</span>
<span id="cb384-217"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-217" aria-hidden="true" tabindex="-1"></a>    pitch_units,</span>
<span id="cb384-218"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-218" aria-hidden="true" tabindex="-1"></a>    smooth,</span>
<span id="cb384-219"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-219" aria-hidden="true" tabindex="-1"></a>    smooth_bw,</span>
<span id="cb384-220"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-220" aria-hidden="true" tabindex="-1"></a>    tmpPraatOut,</span>
<span id="cb384-221"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-221" aria-hidden="true" tabindex="-1"></a>    tmpPitchInfo</span>
<span id="cb384-222"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-222" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb384-223"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-224"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-224" aria-hidden="true" tabindex="-1"></a>  pitchInfo <span class="ot">=</span> <span class="fu">read.csv</span>(tmpPitchInfo, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb384-225"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-226"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-226" aria-hidden="true" tabindex="-1"></a>  nframes <span class="ot">=</span> pitchInfo<span class="sc">$</span>nframes[<span class="dv">1</span>]</span>
<span id="cb384-227"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-227" aria-hidden="true" tabindex="-1"></a>  timestep <span class="ot">=</span> pitchInfo<span class="sc">$</span>timestep[<span class="dv">1</span>]</span>
<span id="cb384-228"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-228" aria-hidden="true" tabindex="-1"></a>  sR <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span>timestep</span>
<span id="cb384-229"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-229" aria-hidden="true" tabindex="-1"></a>  start <span class="ot">=</span> pitchInfo<span class="sc">$</span>start[<span class="dv">1</span>]</span>
<span id="cb384-230"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-230" aria-hidden="true" tabindex="-1"></a>  end <span class="ot">=</span> pitchInfo<span class="sc">$</span>end[<span class="dv">1</span>]</span>
<span id="cb384-231"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-232"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-232" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create empty df that holds all time steps</span></span>
<span id="cb384-233"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-233" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">Time =</span> <span class="fu">seq</span>(start, end, <span class="at">by =</span> timestep), <span class="at">F0 =</span> <span class="dv">0</span>)</span>
<span id="cb384-234"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-234" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get vals</span></span>
<span id="cb384-235"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-235" aria-hidden="true" tabindex="-1"></a>  df_tmp <span class="ot">=</span> <span class="fu">read.csv</span>(tmpPraatOut, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb384-236"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-236" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and fill up empty df (ensures every timestep has a value)</span></span>
<span id="cb384-237"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-237" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>F0[df<span class="sc">$</span>Time <span class="sc">%in%</span> df_tmp<span class="sc">$</span>Time] <span class="ot">=</span> df_tmp<span class="sc">$</span>F0</span>
<span id="cb384-238"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-238" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb384-239"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-240"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-240" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create AsspDataObj</span></span>
<span id="cb384-241"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-241" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb384-242"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-243"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;INT16&quot;</span>)</span>
<span id="cb384-244"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;sampleRate&quot;</span>) <span class="ot">=</span> sR</span>
<span id="cb384-245"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-246"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-246" aria-hidden="true" tabindex="-1"></a>  tmpObj <span class="ot">=</span> wrassp<span class="sc">::</span><span class="fu">read.AsspDataObj</span>(path)</span>
<span id="cb384-247"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-247" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;origFreq&quot;</span>) <span class="ot">=</span> <span class="fu">attr</span>(tmpObj, <span class="st">&quot;sampleRate&quot;</span>)</span>
<span id="cb384-248"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-249"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) <span class="ot">=</span> start</span>
<span id="cb384-250"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ado, <span class="st">&quot;endRecord&quot;</span>) <span class="ot">=</span> <span class="fu">as.integer</span>(nframes)</span>
<span id="cb384-251"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-252"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(ado) <span class="ot">=</span> <span class="st">&quot;AsspDataObj&quot;</span></span>
<span id="cb384-253"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-254"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-254" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">AsspFileFormat</span>(ado) <span class="ot">&lt;-</span> <span class="st">&quot;SSFF&quot;</span></span>
<span id="cb384-255"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-255" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">AsspDataFormat</span>(ado) <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">2</span>)</span>
<span id="cb384-256"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-256" aria-hidden="true" tabindex="-1"></a>  f0Vals <span class="ot">=</span> <span class="fu">as.integer</span>(df[,<span class="st">&quot;F0&quot;</span>])</span>
<span id="cb384-257"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-257" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> wrassp<span class="sc">::</span><span class="fu">addTrack</span>(ado, <span class="st">&quot;f0&quot;</span>, f0Vals, <span class="st">&quot;INT16&quot;</span>)</span>
<span id="cb384-258"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-259"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-259" aria-hidden="true" tabindex="-1"></a>  <span class="co"># prepend missing values as praat sometimes</span></span>
<span id="cb384-260"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-260" aria-hidden="true" tabindex="-1"></a>  <span class="co"># starts fairly late</span></span>
<span id="cb384-261"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-261" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(start <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">/</span> sR){</span>
<span id="cb384-262"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-262" aria-hidden="true" tabindex="-1"></a>    nr_of_missing_samples <span class="ot">=</span> <span class="fu">floor</span>(start <span class="sc">/</span> (<span class="dv">1</span><span class="sc">/</span>sR))</span>
<span id="cb384-263"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-264"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-264" aria-hidden="true" tabindex="-1"></a>    missing_f0_vals <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">0</span>,</span>
<span id="cb384-265"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-265" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nrow =</span> nr_of_missing_samples,</span>
<span id="cb384-266"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-266" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ncol =</span> <span class="fu">ncol</span>(ado<span class="sc">$</span>f0))</span>
<span id="cb384-267"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-268"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-268" aria-hidden="true" tabindex="-1"></a>    <span class="co"># prepend values</span></span>
<span id="cb384-269"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-269" aria-hidden="true" tabindex="-1"></a>    ado<span class="sc">$</span>f0 <span class="ot">=</span> <span class="fu">rbind</span>(missing_f0_vals, ado<span class="sc">$</span>f0)</span>
<span id="cb384-270"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-271"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-271" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fix start time</span></span>
<span id="cb384-272"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-272" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) <span class="ot">=</span> start <span class="sc">-</span> nr_of_missing_samples <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">/</span> sR)</span>
<span id="cb384-273"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-273" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>), <span class="dv">6</span>)</span>
<span id="cb384-274"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-274" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-275"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ado)</span>
<span id="cb384-276"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-276" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb384-277"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-278"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-279"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-279" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-280"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-280" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb384-281"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-281" aria-hidden="true" tabindex="-1"></a><span class="co"># write Praat script to tmp dir</span></span>
<span id="cb384-282"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-282" aria-hidden="true" tabindex="-1"></a>write_praat_script <span class="ot">&lt;-</span> <span class="cf">function</span>(script, tmp_out) {</span>
<span id="cb384-283"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-283" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (script <span class="sc">==</span> <span class="st">&quot;formant&quot;</span>) {</span>
<span id="cb384-284"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-284" aria-hidden="true" tabindex="-1"></a>    readr<span class="sc">::</span><span class="fu">write_lines</span>(formant_text, tmp_out)</span>
<span id="cb384-285"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-285" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (script <span class="sc">==</span> <span class="st">&quot;pitch&quot;</span>) {</span>
<span id="cb384-286"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-286" aria-hidden="true" tabindex="-1"></a>    readr<span class="sc">::</span><span class="fu">write_lines</span>(pitch_text, tmp_out)</span>
<span id="cb384-287"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-287" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb384-288"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-288" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>()</span>
<span id="cb384-289"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-289" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb384-290"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-290" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb384-291"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-292"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-292" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-293"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-293" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb384-294"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-294" aria-hidden="true" tabindex="-1"></a><span class="co"># formant Praat script text</span></span>
<span id="cb384-295"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-295" aria-hidden="true" tabindex="-1"></a>formant_text <span class="ot">=</span> <span class="st">&quot;# To Formant (burg)</span></span>
<span id="cb384-296"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-297"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-297" aria-hidden="true" tabindex="-1"></a><span class="st">form To formants</span></span>
<span id="cb384-298"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-298" aria-hidden="true" tabindex="-1"></a><span class="st">  text path ./</span></span>
<span id="cb384-299"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-299" aria-hidden="true" tabindex="-1"></a><span class="st">  real time_step 0.0</span></span>
<span id="cb384-300"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-300" aria-hidden="true" tabindex="-1"></a><span class="st">  integer max_fm 5</span></span>
<span id="cb384-301"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-301" aria-hidden="true" tabindex="-1"></a><span class="st">  real ceiling 5500.0</span></span>
<span id="cb384-302"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-302" aria-hidden="true" tabindex="-1"></a><span class="st">  real window 0.025</span></span>
<span id="cb384-303"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-303" aria-hidden="true" tabindex="-1"></a><span class="st">  real pre_emph 50.0</span></span>
<span id="cb384-304"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-304" aria-hidden="true" tabindex="-1"></a><span class="st">  text out ./</span></span>
<span id="cb384-305"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-305" aria-hidden="true" tabindex="-1"></a><span class="st">endform</span></span>
<span id="cb384-306"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-307"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-307" aria-hidden="true" tabindex="-1"></a><span class="st">sound = Read from file: path$</span></span>
<span id="cb384-308"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-309"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-309" aria-hidden="true" tabindex="-1"></a><span class="st">formant = To Formant (burg): time_step, max_fm, ceiling, window, pre_emph</span></span>
<span id="cb384-310"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-311"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-311" aria-hidden="true" tabindex="-1"></a><span class="st">table = Down to Table: </span><span class="sc">\&quot;</span><span class="st">no</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">yes</span><span class="sc">\&quot;</span><span class="st">, 6, </span><span class="sc">\&quot;</span><span class="st">no</span><span class="sc">\&quot;</span><span class="st">, 3, </span><span class="sc">\&quot;</span><span class="st">yes</span><span class="sc">\&quot;</span><span class="st">, 3, </span><span class="sc">\&quot;</span><span class="st">yes</span><span class="sc">\&quot;</span></span>
<span id="cb384-312"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-313"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-313" aria-hidden="true" tabindex="-1"></a><span class="st">Save as comma-separated file: out$</span></span>
<span id="cb384-314"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-315"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-315" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb384-316"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-317"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-318"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-318" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################################</span></span>
<span id="cb384-319"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-319" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb384-320"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-320" aria-hidden="true" tabindex="-1"></a><span class="co"># formant pitch script text</span></span>
<span id="cb384-321"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-321" aria-hidden="true" tabindex="-1"></a>pitch_text <span class="ot">=</span> <span class="st">&quot;# To Pitch</span></span>
<span id="cb384-322"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-323"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-323" aria-hidden="true" tabindex="-1"></a><span class="st">form To pitch</span></span>
<span id="cb384-324"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-324" aria-hidden="true" tabindex="-1"></a><span class="st">  text path ./</span></span>
<span id="cb384-325"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-325" aria-hidden="true" tabindex="-1"></a><span class="st">  real time_step 0.0</span></span>
<span id="cb384-326"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-326" aria-hidden="true" tabindex="-1"></a><span class="st">  real pitch_floor 75.0</span></span>
<span id="cb384-327"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-327" aria-hidden="true" tabindex="-1"></a><span class="st">  real pitch_ceiling 600.0</span></span>
<span id="cb384-328"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-328" aria-hidden="true" tabindex="-1"></a><span class="st">  word pitch_units Hertz</span></span>
<span id="cb384-329"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-329" aria-hidden="true" tabindex="-1"></a><span class="st">  boolean smooth 0</span></span>
<span id="cb384-330"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-330" aria-hidden="true" tabindex="-1"></a><span class="st">  real smooth_bw 10.0</span></span>
<span id="cb384-331"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-331" aria-hidden="true" tabindex="-1"></a><span class="st">  text out ./</span></span>
<span id="cb384-332"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-332" aria-hidden="true" tabindex="-1"></a><span class="st">  text pitchInfo ./</span></span>
<span id="cb384-333"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-333" aria-hidden="true" tabindex="-1"></a><span class="st">endform</span></span>
<span id="cb384-334"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-335"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-335" aria-hidden="true" tabindex="-1"></a><span class="st">sound = Read from file: path$</span></span>
<span id="cb384-336"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-337"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-337" aria-hidden="true" tabindex="-1"></a><span class="st">pitch = To Pitch: time_step, pitch_floor, pitch_ceiling</span></span>
<span id="cb384-338"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-339"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-339" aria-hidden="true" tabindex="-1"></a><span class="st">if smooth == 0</span></span>
<span id="cb384-340"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-340" aria-hidden="true" tabindex="-1"></a><span class="st">  pitch = Smooth: smooth_bw</span></span>
<span id="cb384-341"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-341" aria-hidden="true" tabindex="-1"></a><span class="st">endif</span></span>
<span id="cb384-342"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-343"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-343" aria-hidden="true" tabindex="-1"></a><span class="st">nframes = Get number of frames</span></span>
<span id="cb384-344"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-344" aria-hidden="true" tabindex="-1"></a><span class="st">timestep = Get time step</span></span>
<span id="cb384-345"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-345" aria-hidden="true" tabindex="-1"></a><span class="st">start = Get time from frame number: 1</span></span>
<span id="cb384-346"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-346" aria-hidden="true" tabindex="-1"></a><span class="st">end = Get time from frame number: nframes</span></span>
<span id="cb384-347"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-348"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-348" aria-hidden="true" tabindex="-1"></a><span class="st">header$ = </span><span class="sc">\&quot;</span><span class="st">nframes,timestep,start,end</span><span class="sc">\&quot;</span></span>
<span id="cb384-349"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-349" aria-hidden="true" tabindex="-1"></a><span class="st">writeFileLine(pitchInfo$, header$)</span></span>
<span id="cb384-350"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-350" aria-hidden="true" tabindex="-1"></a><span class="st">line$ = </span><span class="sc">\&quot;</span><span class="st">&#39;nframes&#39;,&#39;timestep&#39;,&#39;start&#39;,&#39;end&#39;</span><span class="sc">\&quot;</span></span>
<span id="cb384-351"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-351" aria-hidden="true" tabindex="-1"></a><span class="st">appendFileLine(pitchInfo$, line$)</span></span>
<span id="cb384-352"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-353"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-353" aria-hidden="true" tabindex="-1"></a><span class="st">Down to PitchTier</span></span>
<span id="cb384-354"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-355"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-355" aria-hidden="true" tabindex="-1"></a><span class="st">Down to TableOfReal: pitch_units$</span></span>
<span id="cb384-356"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-357"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-357" aria-hidden="true" tabindex="-1"></a><span class="st">Save as headerless spreadsheet file: out$</span></span>
<span id="cb384-358"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-359"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb384-359" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span></span></code></pre></div>
<p>The following code chunk shows how this function can be applied to <code>.wav</code> files of an emuDB.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emuR)</span>
<span id="cb385-2"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-3"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create demo data in tempdir()</span></span>
<span id="cb385-4"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-4" aria-hidden="true" tabindex="-1"></a><span class="fu">create_emuRdemoData</span>(<span class="fu">tempdir</span>())</span>
<span id="cb385-5"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-6"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create path to demo database</span></span>
<span id="cb385-7"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-7" aria-hidden="true" tabindex="-1"></a>path2ae <span class="ot">=</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;emuR_demoData&quot;</span>, <span class="st">&quot;ae_emuDB&quot;</span>)</span>
<span id="cb385-8"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-9"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-9" aria-hidden="true" tabindex="-1"></a><span class="co"># list all .wav files in the ae emuDB</span></span>
<span id="cb385-10"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-10" aria-hidden="true" tabindex="-1"></a>paths2wavFiles <span class="ot">=</span> <span class="fu">list.files</span>(path2ae, <span class="at">pattern =</span> <span class="st">&quot;*.wav$&quot;</span>,</span>
<span id="cb385-11"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-11" aria-hidden="true" tabindex="-1"></a>                            <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb385-12"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-13"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-13" aria-hidden="true" tabindex="-1"></a><span class="co"># loop through files</span></span>
<span id="cb385-14"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-14" aria-hidden="true" tabindex="-1"></a><span class="do">## formants</span></span>
<span id="cb385-15"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(fp <span class="cf">in</span> paths2wavFiles){</span>
<span id="cb385-16"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-16" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> <span class="fu">praat2AsspDataObj</span>(fp, <span class="at">object =</span> <span class="st">&quot;formant&quot;</span>)</span>
<span id="cb385-17"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-17" aria-hidden="true" tabindex="-1"></a>  newPath <span class="ot">=</span> <span class="fu">paste0</span>(tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(fp), <span class="st">&#39;.praatFms&#39;</span>)</span>
<span id="cb385-18"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(paste0(fp, &#39; -&gt; &#39;, newPath)) # uncomment for simple log</span></span>
<span id="cb385-19"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-19" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">write.AsspDataObj</span>(ado, <span class="at">file =</span> newPath)</span>
<span id="cb385-20"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb385-21"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-21" aria-hidden="true" tabindex="-1"></a><span class="do">## pitch</span></span>
<span id="cb385-22"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(fp <span class="cf">in</span> paths2wavFiles){</span>
<span id="cb385-23"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-23" aria-hidden="true" tabindex="-1"></a>  ado <span class="ot">=</span> <span class="fu">praat2AsspDataObj</span>(fp,</span>
<span id="cb385-24"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">object =</span> <span class="st">&quot;pitch&quot;</span>,</span>
<span id="cb385-25"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-25" aria-hidden="true" tabindex="-1"></a>                          <span class="at">time_step =</span> <span class="fl">0.00625</span>,</span>
<span id="cb385-26"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-26" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pitch_floor =</span> <span class="dv">60</span>,</span>
<span id="cb385-27"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-27" aria-hidden="true" tabindex="-1"></a>                          <span class="at">smooth =</span> <span class="cn">TRUE</span>)</span>
<span id="cb385-28"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-28" aria-hidden="true" tabindex="-1"></a>  newPath <span class="ot">=</span> <span class="fu">paste0</span>(tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(fp), <span class="st">&#39;.praatF0&#39;</span>)</span>
<span id="cb385-29"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(paste0(fp, &#39; -&gt; &#39;, newPath)) # uncomment for simple log</span></span>
<span id="cb385-30"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-30" aria-hidden="true" tabindex="-1"></a>  wrassp<span class="sc">::</span><span class="fu">write.AsspDataObj</span>(ado, <span class="at">file =</span> newPath)</span>
<span id="cb385-31"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb385-32"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-33"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-33" aria-hidden="true" tabindex="-1"></a><span class="co"># load emuDB</span></span>
<span id="cb385-34"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-34" aria-hidden="true" tabindex="-1"></a><span class="co"># (verbose = F is only set to avoid additional output in manual)</span></span>
<span id="cb385-35"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-35" aria-hidden="true" tabindex="-1"></a>ae <span class="ot">=</span> <span class="fu">load_emuDB</span>(path2ae, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb385-36"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-37"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-37" aria-hidden="true" tabindex="-1"></a><span class="co"># add SSFF track definition</span></span>
<span id="cb385-38"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-38" aria-hidden="true" tabindex="-1"></a><span class="fu">add_ssffTrackDefinition</span>(ae,</span>
<span id="cb385-39"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-39" aria-hidden="true" tabindex="-1"></a>                        <span class="at">name =</span> <span class="st">&quot;praatFms&quot;</span>,</span>
<span id="cb385-40"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-40" aria-hidden="true" tabindex="-1"></a>                        <span class="at">columnName =</span> <span class="st">&quot;fm&quot;</span>,</span>
<span id="cb385-41"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-41" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fileExtension =</span> <span class="st">&quot;praatFms&quot;</span>)</span>
<span id="cb385-42"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-43"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-43" aria-hidden="true" tabindex="-1"></a><span class="fu">add_ssffTrackDefinition</span>(ae,</span>
<span id="cb385-44"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-44" aria-hidden="true" tabindex="-1"></a>                        <span class="at">name =</span> <span class="st">&quot;praatF0&quot;</span>,</span>
<span id="cb385-45"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-45" aria-hidden="true" tabindex="-1"></a>                        <span class="at">columnName =</span> <span class="st">&quot;f0&quot;</span>,</span>
<span id="cb385-46"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-46" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fileExtension =</span> <span class="st">&quot;praatF0&quot;</span>)</span>
<span id="cb385-47"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-48"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-48" aria-hidden="true" tabindex="-1"></a><span class="co"># test query + get_trackdata</span></span>
<span id="cb385-49"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-49" aria-hidden="true" tabindex="-1"></a>sl <span class="ot">=</span> <span class="fu">query</span>(ae, <span class="st">&quot;Phonetic == n&quot;</span>)</span>
<span id="cb385-50"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-51"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-51" aria-hidden="true" tabindex="-1"></a><span class="co"># (verbose = F is only set to avoid additional output in manual)</span></span>
<span id="cb385-52"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-52" aria-hidden="true" tabindex="-1"></a>td <span class="ot">=</span> <span class="fu">get_trackdata</span>(ae,</span>
<span id="cb385-53"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-53" aria-hidden="true" tabindex="-1"></a>                   sl,</span>
<span id="cb385-54"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-54" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ssffTrackName =</span> <span class="st">&quot;praatFms&quot;</span>,</span>
<span id="cb385-55"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-55" aria-hidden="true" tabindex="-1"></a>                   <span class="at">verbose =</span> F)</span>
<span id="cb385-56"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-57"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-57" aria-hidden="true" tabindex="-1"></a>pt <span class="ot">=</span> <span class="fu">get_trackdata</span>(ae,</span>
<span id="cb385-58"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-58" aria-hidden="true" tabindex="-1"></a>                   sl,</span>
<span id="cb385-59"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-59" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ssffTrackName =</span> <span class="st">&quot;praatF0&quot;</span>,</span>
<span id="cb385-60"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#cb385-60" aria-hidden="true" tabindex="-1"></a>                   <span class="at">verbose =</span> F)</span></code></pre></div>
<p>A few comments about synchronized F0 and Formant values:</p>
<ul>
<li><strong>The <code>time_step</code> argument is "Time step (s) (standard value: 0.0) the measurement interval (frame duration), in seconds.</strong>
If you supply 0, Praat will use a time step of 0.75 / (pitch floor), e.g. 0.01 seconds if the pitch floor is 75 Hz;
in this example, Praat computes 100 pitch values per second. "
Here <code>time_step</code> is set to 0.00625 (Seconds) when calculating pitch (as opposed to Praat’s default of 0.0) in order
to keep it in line with Time step in “To Formant…,”
because Time step in “To Formants…” is derived from
window length (which in “To Formant…” defaults to 0.025) (window length/4 (–&gt; Time step in “To Formant…”
will usually be 0.00625))</li>
<li><strong>The <code>pitch_floor</code> argument is "Pitch floor (Hz) (standard value: 75 Hz)</strong>:
candidates below this frequency will not be recruited.
This parameter determines the length of the analysis window: it will be 3 longest periods long, i.e.,
if the pitch floor is 75 Hz, the window will be 3/75 = 0.04 seconds long.
Note that if you set the time step to zero, the analysis windows for consecutive measurements will overlap appreciably:
Praat will always compute 4 pitch values within one window length, i.e., the degree of oversampling is 4."
Importantly, this parameter is set NOT to praat’s default 75 Hz, but to 60 Hz, again because of correspondence
of window lengths between “To Pitch…” and “To Formants….” The actual window length in “To Formants…” will be twice as long
as the value given in the “To Formants…” command, i.e. the default of 0.025 will result in a window length of 0.05.
A window length in “To Pitch…” can indirectly achieved by using a pitch floor value of 60 Hz (given that 3/60 = 0.05).
In most cases, differing window lengths will not affect the temporal position of the F0 and Formant values, however, due
to problems near the edges, sometimes they will (and therefore result in non-synchronized F0 and Formant values).
Due to rounding errors, F0 and Formant values still might be slightly asynchronous; to avoid this, <code>praat2AsspDataObj()</code>
rounds the start time with a precicion of 0.001 ms (via <code>round(attr(ado, "startTime"),6)</code> at the very end).</li>
<li><strong>The <code>pitch_ceiling</code> argument (default: 600)</strong> will not affect any of the other parameters.</li>
</ul>
</div>
</div>
<p style="text-align: center;">
<a href="19-app-chap-wrassp.html"><button class="btn btn-default">Previous</button></a>
<a href="https://github.com/IPS-LMU/The-EMU-SDMS-Manual/edit/master/app_chap-wrassp.Rmd"><button class="btn btn-default">Edit</button></a>
<a href="19-2-sec-app-chap-wrassp-opensmileSigProc.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
